This folder contains all pictures and configuration for training a Yolo model to detect fields (text fields, checkbox, ...) on a picture

- `generate-html.py` is a script that generates forms (see below)
- `convert_pascalvoc_to_yolo.py` from `dataset_real` folder, generate small pictures
- `generate_train_file.py` creates folders used for training by picking up files from any directory and putting them to a `dataset` folder
- `dataset_real` contains all pictures get from web 
- `dataset_extracted` is the extraction of smaller pictures from `dataset_real` so that training does not consume too much GPU memory. It's based on zones called `_form_` which contain some fields. Each form will be about 400x400 pixels
- `dataset_generated_small` contains all generated pictures (generated by `generate-html.py` script)

# 0. Prepare dataset #

- Install requirements with `pip install -r requirements.txt`
- Generate small pictures (see below)
- If number or type of classes has been updated, change the file `data/web-generated.yaml` file accordingly (**order of classes is important!**)
- Generate forms (see below)
- 

# 1. Generate small pictures #

If you give big pictures to training, algorithm will resize them and detection will be bad. So we crop pictures around forms. To do so, while annotating the pictures with `labelImg`we add a `_form_` class that is used to delimit parts of form.
There may be several `_form_` for a single picture

## Generation ##

`python convert_pascalvoc_to_yolo.py dataset_real dataset_extracted`

This will create all small pictures in the `dataset_extracted` folder
This will also update a `data/web-generated.names` file that will contain the classes that should be detected. 

At the end, **Don't forget to commit de changes**


# 2. Generate forms #

`generate-html.py` script will create pictures with various forms so that training can be more accurate

## Generation ##

To generate file, execute `python generate-html.py data/web-generated.names`

Content of `data/web-generated.names` is the list of class names in the same order as what we have in `data/web-generated.yaml`
By default, 2000 pictures are created in `out` folder, you can change this value by changing line

```python
number_of_images = 2000
```
Once happy with generation, move the content of `out` folder to `dataset_generated_small`
